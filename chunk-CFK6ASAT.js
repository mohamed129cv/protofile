import{c as L,g as B}from"./chunk-PN24R2JZ.js";import{a as Y,b as d,c as H,d as J,e as b,f as u,h as K,i as W,j as X,k as Z,l as ee,m as te,n as ie,o as re,p as oe,q as ne,s as ae}from"./chunk-MLZN7AYN.js";import{l as z,n as Q,o as ce}from"./chunk-RMVMK46S.js";import{e as D,g as R,h as $}from"./chunk-SV3AUXLR.js";import{$a as q,Eb as A,Fb as x,Hb as U,Ib as G,Ja as I,Na as a,Oa as v,Z as T,_a as _,aa as N,ab as f,eb as s,fb as y,gb as w,ha as g,hb as O,ia as j,ib as r,jb as n,kb as p,nb as P,pb as h,qb as m,ub as S,vb as k,wb as E,xb as c,yb as F,zb as V}from"./chunk-7FF7VGYX.js";var M=class e{transform(i,t=25){if(i)return i.length>t?`${i.slice(0,t)}...`:i}static \u0275fac=function(t){return new(t||e)};static \u0275pipe=N({name:"projectDis",type:e,pure:!0,standalone:!0})};var se=["add_pro"],me=["btnSubmit"],_e=e=>({dark:e}),le=e=>({"btn-success":e});function ue(e,i){if(e&1){let t=P();r(0,"i",38),h("click",function(){g(t);let l=m().$implicit,C=m();return j(C.enableEdit(l.id))}),n()}}function Ce(e,i){if(e&1){let t=P();r(0,"i",39),h("click",function(){g(t);let l=m().$implicit,C=m();return j(C.deleteProject(l.id))}),n()}}function fe(e,i){if(e&1){let t=P();r(0,"article",3)(1,"img",28),h("click",function(){let l=g(t).$implicit,C=m();return j(C.detalisProject(l.id))}),n(),r(2,"span",29),p(3,"i",30),c(4),n(),r(5,"section",31)(6,"div",32)(7,"h4",33),h("click",function(){let l=g(t).$implicit,C=m();return j(C.detalisProject(l.id))}),c(8),n(),r(9,"p"),c(10),U(11,"projectDis"),n()(),r(12,"div",34)(13,"i",35),h("click",function(){let l=g(t).$implicit,C=m();return j(C.detalisProject(l.id))}),n(),_(14,ue,1,0,"i",36)(15,Ce,1,0,"i",37),n()()()}if(e&2){let t=i.$implicit,o=m();q("data-id",t.id),a(),f("src",t.project_image,I),a(3),V(" ",t.project_rate,""),a(4),F(t.project_title),a(2),F(G(11,7,t.project_dis)),a(4),f("ngIf",o.adminMode),a(),f("ngIf",o.adminMode)}}function ge(e,i){if(e&1){let t=P();r(0,"section",40),h("click",function(){g(t);let l=m();return j(l.open_add_pro())}),r(1,"h4"),c(2,"Add New Project"),n(),r(3,"span"),p(4,"i",41),n()()}}function je(e,i){e&1&&(r(0,"p",42),p(1,"i",43),c(2," this flid required"),n())}function he(e,i){e&1&&(r(0,"p",42),p(1,"i",43),c(2," project title must be at least 3 characters"),n())}function Pe(e,i){if(e&1&&_(0,je,3,0,"p",42)(1,he,3,0,"p",42),e&2){let t=m();s(t.project_title.getError("required")?0:-1),a(),s(t.project_title.getError("minlength")?1:-1)}}function ve(e,i){e&1&&(r(0,"p",42),p(1,"i",43),c(2," this flid required"),n())}function xe(e,i){e&1&&(r(0,"p",42),p(1,"i",43),c(2," project dicription must be at least 3 characters"),n())}function be(e,i){if(e&1&&_(0,ve,3,0,"p",42)(1,xe,3,0,"p",42),e&2){let t=m();s(t.project_dis.getError("required")?0:-1),a(),s(t.project_dis.getError("minlength")?1:-1)}}function Me(e,i){e&1&&(r(0,"p",44),p(1,"i",43),c(2," this flid required"),n())}function ye(e,i){if(e&1&&_(0,Me,3,0,"p",44),e&2){let t=m();s(t.project_type.getError("required")?0:-1)}}function we(e,i){e&1&&(r(0,"p",42),p(1,"i",43),c(2," this flid required"),n())}function Oe(e,i){e&1&&(r(0,"p",42),p(1,"i",43),c(2," project must be big than or equal 1 "),n())}function Se(e,i){e&1&&(r(0,"p",42),p(1,"i",43),c(2," project rate must be less than or equal 10"),n())}function ke(e,i){if(e&1&&_(0,we,3,0,"p",42)(1,Oe,3,0,"p",42)(2,Se,3,0,"p",42),e&2){let t=m();s(t.project_title.getError("required")?0:-1),a(),s(t.project_title.getError("min")?1:-1),a(),s(t.project_rate.getError("max")?2:-1)}}function Ee(e,i){e&1&&(r(0,"p",42),p(1,"i",43),c(2," this flid required"),n())}function Fe(e,i){if(e&1&&_(0,Ee,3,0,"p",42),e&2){let t=m();s(t.project_image.getError("required")?0:-1)}}function Ve(e,i){if(e&1&&(r(0,"div",24)(1,"label",45),c(2),n(),p(3,"input",46)(4,"input",47),r(5,"select",48)(6,"option",49),c(7,"Video"),n(),r(8,"option",49),c(9,"Image"),n()()()),e&2){let t=i.$index;f("formGroupName",t),a(2),V("Add media ",t+1,""),a(4),f("ngValue",!0),a(2),f("ngValue",!1)}}function Te(e,i){e&1&&c(0," Update Project ")}function Ne(e,i){e&1&&c(0," add project ")}var pe=class e{constructor(i,t,o,l){this._ProjectApiService=i;this._ToastrService=t;this._router=o;this._bg=l}adminMode=!1;projcets=[];bg;ngAfterViewInit(){this._bg.$theme.subscribe({next:i=>{this.bg=i}})}ngOnInit(){this.initFormControlNewPro(),this.initFormGroupNewPro()}getProjects(){this._ProjectApiService.getAllProjects().subscribe({next:i=>{this.projcets=i}})}add_pro_section;btnSubmit;add_project;project_title;project_dis;project_rate;project_type;project_details;project_image;project_media;url;dis;isVideo;eidtMode=!1;projectId;open_add_pro(){this.add_pro_section.nativeElement.classList.add("show"),this.add_pro_section.nativeElement.classList.remove("hidden"),this.mediaControls.push(this.createMediaGroup())}closing_add_pro(){this.add_pro_section.nativeElement.classList.add("hidden"),this.add_pro_section.nativeElement.classList.remove("show"),this.getProjects(),this.eidtMode=!1,this.add_project.reset(),this.mediaControls.clear()}initFormControlNewPro(){this.project_title=new u("",[d.required,d.minLength(3)]),this.project_dis=new u("",[d.required,d.minLength(3)]),this.project_rate=new u("",[d.required,d.min(1),d.max(10)]),this.project_type=new u("",[d.required]),this.project_details=new u("",[d.required]),this.project_image=new u("",[d.required])}initFormGroupNewPro(){this.add_project=new b({project_title:this.project_title,project_dis:this.project_dis,project_rate:this.project_rate,project_type:this.project_type,project_details:this.project_details,project_image:this.project_image,project_media:this.project_media=new ne([this.createMediaGroup()])})}createMediaGroup(){return new b({url:new u("",d.required),dis:new u("",d.required),isVideo:new u(!1,d.required)})}get mediaControls(){return this.add_project.get("project_media")}addMedia(){this.mediaControls.push(this.createMediaGroup())}add_pro_sbumit(){this.add_project.valid?this._ProjectApiService.addNewProject(this.add_project.value).subscribe({next:i=>{this._ToastrService.success("Project added successfully.","Success"),this.add_project.reset(),this.getProjects()}}):(this.add_project.markAllAsTouched(),Object.keys(this.add_project.controls).forEach(i=>{this.add_project.controls[i].markAsDirty()}),this._ToastrService.error("Please fill in all required fields.","Error"))}enableEdit(i){this.open_add_pro();let t=this.projcets.find(o=>o.id===i);t&&(this.eidtMode=!0,this.projectId=t.id,this.project_title.setValue(t.project_title),this.project_dis.setValue(t.project_dis),this.project_image.setValue(t.project_image),this.project_rate.setValue(t.project_rate),this.project_type.setValue(t.project_type),this.project_details.setValue(t.project_details),t.project_media.forEach(o=>{this.mediaControls.push(new b({url:new u(o.url,d.required),dis:new u(o.dis,d.required),isVideo:new u(o.isVideo,d.required)}))}))}saveChanges(){this.add_project.valid&&(this.eidtMode=!1,this._ProjectApiService.updataProject(this.projectId,this.add_project.value).subscribe({next:i=>{this.add_project.reset(),this._ToastrService.success("Project updated successfully.","Success ")},error:()=>{this._ToastrService.error("Failed to update project","Error")}}))}deleteProject(i){this._ProjectApiService.deletProject(i).subscribe({next:t=>{this._ToastrService.success("Project deleted successfully.","Success "),this.getProjects()}})}onsubmit(){this.eidtMode?this.saveChanges():this.add_pro_sbumit()}detalisProject(i){this._router.navigate(["project/details",i])}static \u0275fac=function(t){return new(t||e)(v(B),v(z),v(L),v(ce))};static \u0275cmp=T({type:e,selectors:[["app-projects-cart"]],viewQuery:function(t,o){if(t&1&&(S(se,5),S(me,5)),t&2){let l;k(l=E())&&(o.add_pro_section=l.first),k(l=E())&&(o.btnSubmit=l.first)}},inputs:{adminMode:"adminMode",projcets:"projcets"},standalone:!0,features:[A],decls:53,vars:17,consts:[["add_pro",""],["btnSubmit",""],[1,"card_page",3,"ngClass"],["appFadeUp","",1,"project_card","fade-up"],["class","add_new_project fade-up","appFadeUp","",3,"click",4,"ngIf"],[1,"add_type","hidden"],[3,"ngSubmit","formGroup"],[1,"fa-solid","fa-circle-xmark",3,"click"],["appFadeUp","",1,"text-center","fade-up"],[1,"flid"],["for","title","appFadeUp","",1,"form-label","fade-up"],["type","text","name","title","id","title","appFadeUp","","formControlName","project_title",1,"form-control","fade-up"],[1,"validators"],["for","description","appFadeUp","",1,"form-label","fade-up"],["type","text","name","description","id","description","appFadeUp","","formControlName","project_dis",1,"form-control","fade-up"],["for","type","appFadeUp","",1,"form-label","fade-up"],["type","text","name","type","id","type","appFadeUp","","formControlName","project_type",1,"form-control","fade-up"],["for","rate","appFadeUp","",1,"form-label","fade-up"],["type","number","name","rate","id","rate","appFadeUp","","formControlName","project_rate",1,"form-control","fade-up"],["for","media",1,"form-label"],["type","text","name","media","id","media","formControlName","project_image",1,"form-control"],["for","details","appFadeUp","",1,"form-label","fade-up"],["type","text","name","details","id","details","appFadeUp","","formControlName","project_details",1,"fade-up","form-control"],["formArrayName","project_media",1,"flid"],[1,"media",3,"formGroupName"],["type","button",1,"btn","btn-primary",3,"click","ngClass"],[1,"fa-solid","fa-plus"],["type","submit",1,"btn","btn-primary","w-25",3,"ngClass"],["alt","project",3,"click","src"],[1,"rate"],[1,"fa-solid","fa-star"],[1,"lr"],[1,"text"],[1,"title",3,"click"],[1,"tools"],[1,"fa-regular","fa-eye",3,"click"],["class","fa-solid fa-pen",3,"click",4,"ngIf"],["class","fa-solid fa-trash",3,"click",4,"ngIf"],[1,"fa-solid","fa-pen",3,"click"],[1,"fa-solid","fa-trash",3,"click"],["appFadeUp","",1,"add_new_project","fade-up",3,"click"],[1,"fa-solid","fa-circle-plus"],["appFadeUp","",1,"my-2","fade-up","alert","alert-danger"],[1,"fa-solid","fa-circle-exclamation"],["appFadeUp","",1,"fade-up","alert","alert-danger","my-2"],[1,"form-label"],["type","text","formControlName","url","placeholder","Media URL","formControlName","url",1,"my-1","form-control","w-25","d-inline","mx-1"],["type","text","formControlName","dis","placeholder","Description","formControlName","dis",1,"my-1","form-control","w-25","d-inline","mx-1"],["name","isVideo","id","isVideo","formControlName","isVideo",1,"form-select","d-inline","w-auto","mx-2"],[3,"ngValue"]],template:function(t,o){if(t&1){let l=P();r(0,"section",2),w(1,fe,16,9,"article",3,y),_(3,ge,5,0,"section",4),r(4,"section",5,0)(6,"form",6),h("ngSubmit",function(){return g(l),j(o.onsubmit())}),r(7,"i",7),h("click",function(){return g(l),j(o.closing_add_pro())}),n(),r(8,"h2",8),c(9," add new project"),n(),r(10,"article",9)(11,"label",10),c(12,"project title"),n(),p(13,"input",11),r(14,"div",12),_(15,Pe,2,2),n()(),r(16,"article",9)(17,"label",13),c(18,"project description"),n(),p(19,"input",14),r(20,"div",12),_(21,be,2,2),n()(),r(22,"article",9)(23,"label",15),c(24,"project type"),n(),p(25,"input",16),r(26,"div",12),_(27,ye,1,1),n()(),r(28,"article",9)(29,"label",17),c(30,"project rate"),n(),p(31,"input",18),r(32,"div",12),_(33,ke,3,3),n()(),r(34,"article",9)(35,"label",19),c(36,"project poster"),n(),p(37,"input",20),r(38,"div",12),_(39,Fe,1,1),n()(),r(40,"article",9)(41,"label",21),c(42,"project details"),n(),p(43,"input",22),n(),r(44,"article",23),w(45,Ve,10,4,"div",24,y),r(47,"button",25),h("click",function(){return g(l),j(o.addMedia())}),p(48,"i",26),n()(),r(49,"button",27,1),_(51,Te,1,0)(52,Ne,1,0),n()()()()}if(t&2){let l;f("ngClass",x(11,_e,o.bg=="dark")),a(),O(o.projcets),a(2),f("ngIf",o.adminMode),a(3),f("formGroup",o.add_project),a(9),s(o.project_title.dirty||o.project_title.touched?15:-1),a(6),s(o.project_dis.dirty||o.project_dis.touched?21:-1),a(6),s(o.project_type.dirty||o.project_type.touched?27:-1),a(6),s(o.project_rate.dirty||o.project_rate.touched?33:-1),a(6),s(o.project_image.dirty||o.project_image.touched?39:-1),a(6),O(o.mediaControls.controls),a(2),f("ngClass",x(13,le,o.bg=="dark")),a(2),f("ngClass",x(15,le,o.bg=="dark")),a(2),s((l=o.eidtMode)===!0?51:l===!1?52:-1)}},dependencies:[$,D,R,M,ae,K,re,oe,Y,W,ie,H,J,X,te,Z,ee,Q],styles:[".card_page[_ngcontent-%COMP%]{width:100%;display:grid;grid-template-columns:repeat(auto-fill,minmax(270px,1fr));gap:2rem;flex-wrap:wrap}.project_card[_ngcontent-%COMP%]{width:100%;height:250px;position:relative;border-radius:.3rem;cursor:pointer;box-shadow:var(--shadow)}.project_card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;border-radius:.3rem;object-fit:cover;anchor-name:--img}.lr[_ngcontent-%COMP%]{height:50%;border-radius:.3rem;width:90%;padding:1rem;display:flex;justify-content:space-between;background-color:#fffc;position:absolute;top:100%;left:5%;opacity:0;transition:var(--transition);pointer-events:none}.lr[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{flex-grow:2}.lr[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{transition:var(--transition)}.lr[_ngcontent-%COMP%]   .tools[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem;color:var(--dark);transition:var(--transition)}.lr[_ngcontent-%COMP%]   .tools[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{transition:var(--transition)}.project_card[_ngcontent-%COMP%]:hover   .lr[_ngcontent-%COMP%]{top:45%;opacity:1;pointer-events:all}.lr[_ngcontent-%COMP%]   .tools[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]:hover, .lr[_ngcontent-%COMP%]:hover   .text[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:var(--main-color)}.project_card[_ngcontent-%COMP%]   .rate[_ngcontent-%COMP%]{display:inline;position:absolute;padding:.3rem;background-color:var(--main-color);color:var(--color-text);border-radius:20px;position-anchor:--img;bottom:calc(anchor(top) - 50px);left:calc(anchor(right) - 60px)}.add_new_project[_ngcontent-%COMP%]{height:250px;border-radius:.4rem;background-color:var(--color-text);box-shadow:var(--shadow);padding:.1rem;display:inline-grid;place-items:center;transition:var(--transition);cursor:pointer;position:relative}.add_new_project[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:100%;height:0;background-color:var(--color-muted);border-radius:.4rem;font-size:2rem;position:absolute;top:100%;left:0;text-align:center;transition:var(--transition);opacity:0}.add_new_project[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{position:absolute;left:50%;top:50%;transform:translate(-50%)}.add_new_project[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:var(--main-color)}.add_new_project[_ngcontent-%COMP%]:hover{color:var(--main-color);transform:translateY(-15px)}.add_new_project[_ngcontent-%COMP%]:hover   span[_ngcontent-%COMP%]{height:100%;top:0;opacity:.5;color:var(--main-color)}.add_type[_ngcontent-%COMP%]{width:100%;height:100%;position:fixed;top:0;left:0;background:#000000b3;display:grid;place-items:center;transition:var(--transition)}.add_type.hidden[_ngcontent-%COMP%]{z-index:0;opacity:0;pointer-events:none}.add_type.show[_ngcontent-%COMP%]{z-index:1;opacity:1;pointer-events:auto}.add_type[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{width:90%;margin:auto;height:80vh;overflow-y:auto;padding:clamp(1.2rem,1vw + .8rem,2rem);display:flex;flex-direction:column;gap:1rem;border-radius:.5rem;background-color:var(--color-text);box-shadow:var(--shadow);position:relative}.add_type[_ngcontent-%COMP%]   .fa-circle-xmark[_ngcontent-%COMP%]{position:absolute;top:10px;right:10px;font-size:1.4rem;color:var(--red);cursor:pointer}.add_type[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:var(--main-color);text-transform:capitalize}.card_page.dark[_ngcontent-%COMP%]   .lr[_ngcontent-%COMP%]{background-color:var(--bg4)}.card_page.dark[_ngcontent-%COMP%]   .lr[_ngcontent-%COMP%]   .tools[_ngcontent-%COMP%]{color:var(--color-text)}.card_page.dark[_ngcontent-%COMP%]   .lr[_ngcontent-%COMP%]   .tools[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]:hover{color:var(--green)}.card_page.dark[_ngcontent-%COMP%]   .lr[_ngcontent-%COMP%]:hover   .text[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:var(--green)!important}.card_page.dark[_ngcontent-%COMP%]   .add_new_project[_ngcontent-%COMP%]{background-color:var(--bg4)}.card_page.dark[_ngcontent-%COMP%]   .add_new_project[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:var(--green)}.card_page.dark[_ngcontent-%COMP%]   .add_new_project[_ngcontent-%COMP%]:hover{color:var(--green)!important}.card_page.dark[_ngcontent-%COMP%]   .add_type[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{background-color:var(--bg4)}.card_page.dark[_ngcontent-%COMP%]   .add_type[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:var(--green)!important}.card_page.dark[_ngcontent-%COMP%]   .project_card[_ngcontent-%COMP%]   .rate[_ngcontent-%COMP%]{background-color:var(--green)}"]})};export{pe as a};

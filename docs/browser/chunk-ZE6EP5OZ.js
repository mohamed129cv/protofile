import{c as D,h as $}from"./chunk-WISLHWKX.js";import{a as z,b as d,c as Q,d as B,e as v,f as u,h as Y,i as H,j as J,k as K,l as W,m as X,n as Z,o as ee,p as te,q as ie,s as re}from"./chunk-QGBBCPKY.js";import{l as R,n as L}from"./chunk-HEFCEIDY.js";import{h as G}from"./chunk-YXIKDZNG.js";import{$a as q,Eb as I,Hb as A,Ib as U,Ja as N,Na as c,Oa as P,Z as T,_a as _,aa as k,ab as g,eb as s,fb as y,gb as w,ha as j,hb as S,ia as C,ib as r,jb as o,kb as p,nb as x,pb as h,qb as m,ub as M,vb as E,wb as F,xb as a,yb as O,zb as V}from"./chunk-7FF7VGYX.js";var b=class t{transform(i,e=25){if(i)return i.length>e?`${i.slice(0,e)}...`:i}static \u0275fac=function(e){return new(e||t)};static \u0275pipe=k({name:"projectDis",type:t,pure:!0,standalone:!0})};var ae=["add_pro"],ce=["btnSubmit"];function le(t,i){if(t&1){let e=x();r(0,"i",38),h("click",function(){j(e);let l=m().$implicit,f=m();return C(f.enableEdit(l.id))}),o()}}function pe(t,i){if(t&1){let e=x();r(0,"i",39),h("click",function(){j(e);let l=m().$implicit,f=m();return C(f.deleteProject(l.id))}),o()}}function de(t,i){if(t&1){let e=x();r(0,"article",3)(1,"img",28),h("click",function(){let l=j(e).$implicit,f=m();return C(f.detalisProject(l.id))}),o(),r(2,"span",29),p(3,"i",30),a(4),o(),r(5,"section",31)(6,"div",32)(7,"h4",33),h("click",function(){let l=j(e).$implicit,f=m();return C(f.detalisProject(l.id))}),a(8),o(),r(9,"p"),a(10),A(11,"projectDis"),o()(),r(12,"div",34)(13,"i",35),h("click",function(){let l=j(e).$implicit,f=m();return C(f.detalisProject(l.id))}),o(),_(14,le,1,0,"i",36)(15,pe,1,0,"i",37),o()()()}if(t&2){let e=i.$implicit,n=m();q("data-id",e.id),c(),g("src",e.project_image,N),c(3),V(" ",e.project_rate,""),c(4),O(e.project_title),c(2),O(U(11,7,e.project_dis)),c(4),g("ngIf",n.adminMode),c(),g("ngIf",n.adminMode)}}function se(t,i){if(t&1){let e=x();r(0,"section",40),h("click",function(){j(e);let l=m();return C(l.open_add_pro())}),r(1,"h4"),a(2,"Add New Project"),o(),r(3,"span"),p(4,"i",41),o()()}}function me(t,i){t&1&&(r(0,"p",42),p(1,"i",43),a(2," this flid required"),o())}function _e(t,i){t&1&&(r(0,"p",42),p(1,"i",43),a(2," project title must be at least 3 characters"),o())}function ue(t,i){if(t&1&&_(0,me,3,0,"p",42)(1,_e,3,0,"p",42),t&2){let e=m();s(e.project_title.getError("required")?0:-1),c(),s(e.project_title.getError("minlength")?1:-1)}}function fe(t,i){t&1&&(r(0,"p",42),p(1,"i",43),a(2," this flid required"),o())}function je(t,i){t&1&&(r(0,"p",42),p(1,"i",43),a(2," project dicription must be at least 3 characters"),o())}function Ce(t,i){if(t&1&&_(0,fe,3,0,"p",42)(1,je,3,0,"p",42),t&2){let e=m();s(e.project_dis.getError("required")?0:-1),c(),s(e.project_dis.getError("minlength")?1:-1)}}function he(t,i){t&1&&(r(0,"p",44),p(1,"i",43),a(2," this flid required"),o())}function ge(t,i){if(t&1&&_(0,he,3,0,"p",44),t&2){let e=m();s(e.project_type.getError("required")?0:-1)}}function xe(t,i){t&1&&(r(0,"p",42),p(1,"i",43),a(2," this flid required"),o())}function Pe(t,i){t&1&&(r(0,"p",42),p(1,"i",43),a(2," project must be big than or equal 1 "),o())}function ve(t,i){t&1&&(r(0,"p",42),p(1,"i",43),a(2," project rate must be less than or equal 10"),o())}function be(t,i){if(t&1&&_(0,xe,3,0,"p",42)(1,Pe,3,0,"p",42)(2,ve,3,0,"p",42),t&2){let e=m();s(e.project_title.getError("required")?0:-1),c(),s(e.project_title.getError("min")?1:-1),c(),s(e.project_rate.getError("max")?2:-1)}}function ye(t,i){t&1&&(r(0,"p",42),p(1,"i",43),a(2," this flid required"),o())}function we(t,i){if(t&1&&_(0,ye,3,0,"p",42),t&2){let e=m();s(e.project_image.getError("required")?0:-1)}}function Se(t,i){if(t&1&&(r(0,"div",24)(1,"label",45),a(2),o(),p(3,"input",46)(4,"input",47),r(5,"select",48)(6,"option",49),a(7,"Video"),o(),r(8,"option",49),a(9,"Image"),o()()()),t&2){let e=i.$index;g("formGroupName",e),c(2),V("Add media ",e+1,""),c(4),g("ngValue",!0),c(2),g("ngValue",!1)}}function Me(t,i){t&1&&a(0," Update Project ")}function Ee(t,i){t&1&&a(0," add project ")}var oe=class t{constructor(i,e,n){this._ProjectApiService=i;this._ToastrService=e;this._router=n}adminMode=!1;projcets=[];ngOnInit(){this.initFormControlNewPro(),this.initFormGroupNewPro()}getProjects(){this._ProjectApiService.getAllProjects().subscribe({next:i=>{this.projcets=i}})}add_pro_section;btnSubmit;add_project;project_title;project_dis;project_rate;project_type;project_details;project_image;project_media;url;dis;isVideo;eidtMode=!1;projectId;open_add_pro(){this.add_pro_section.nativeElement.classList.add("show"),this.add_pro_section.nativeElement.classList.remove("hidden"),this.mediaControls.push(this.createMediaGroup())}closing_add_pro(){this.add_pro_section.nativeElement.classList.add("hidden"),this.add_pro_section.nativeElement.classList.remove("show"),this.getProjects(),this.eidtMode=!1,this.add_project.reset(),this.mediaControls.clear()}initFormControlNewPro(){this.project_title=new u("",[d.required,d.minLength(3)]),this.project_dis=new u("",[d.required,d.minLength(3)]),this.project_rate=new u("",[d.required,d.min(1),d.max(10)]),this.project_type=new u("",[d.required]),this.project_details=new u("",[d.required]),this.project_image=new u("",[d.required])}initFormGroupNewPro(){this.add_project=new v({project_title:this.project_title,project_dis:this.project_dis,project_rate:this.project_rate,project_type:this.project_type,project_details:this.project_details,project_image:this.project_image,project_media:this.project_media=new ie([this.createMediaGroup()])})}createMediaGroup(){return new v({url:new u("",d.required),dis:new u("",d.required),isVideo:new u(!1,d.required)})}get mediaControls(){return this.add_project.get("project_media")}addMedia(){this.mediaControls.push(this.createMediaGroup())}add_pro_sbumit(){this.add_project.valid?this._ProjectApiService.addNewProject(this.add_project.value).subscribe({next:i=>{this._ToastrService.success("Project added successfully.","Success"),this.add_project.reset(),this.getProjects()}}):(this.add_project.markAllAsTouched(),Object.keys(this.add_project.controls).forEach(i=>{this.add_project.controls[i].markAsDirty()}),this._ToastrService.error("Please fill in all required fields.","Error"))}enableEdit(i){this.open_add_pro();let e=this.projcets.find(n=>n.id===i);e&&(this.eidtMode=!0,this.projectId=e.id,this.project_title.setValue(e.project_title),this.project_dis.setValue(e.project_dis),this.project_image.setValue(e.project_image),this.project_rate.setValue(e.project_rate),this.project_type.setValue(e.project_type),this.project_details.setValue(e.project_details),e.project_media.forEach(n=>{this.mediaControls.push(new v({url:new u(n.url,d.required),dis:new u(n.dis,d.required),isVideo:new u(n.isVideo,d.required)}))}))}saveChanges(){this.add_project.valid&&(this.eidtMode=!1,this._ProjectApiService.updataProject(this.projectId,this.add_project.value).subscribe({next:i=>{this.add_project.reset(),this._ToastrService.success("Project updated successfully.","Success ")},error:()=>{this._ToastrService.error("Failed to update project","Error")}}))}deleteProject(i){this._ProjectApiService.deletProject(i).subscribe({next:e=>{this._ToastrService.success("Project deleted successfully.","Success "),this.getProjects()}})}onsubmit(){this.eidtMode?this.saveChanges():this.add_pro_sbumit()}detalisProject(i){this._router.navigate(["project/details",i])}static \u0275fac=function(e){return new(e||t)(P($),P(R),P(D))};static \u0275cmp=T({type:t,selectors:[["app-projects-cart"]],viewQuery:function(e,n){if(e&1&&(M(ae,5),M(ce,5)),e&2){let l;E(l=F())&&(n.add_pro_section=l.first),E(l=F())&&(n.btnSubmit=l.first)}},inputs:{adminMode:"adminMode",projcets:"projcets"},standalone:!0,features:[I],decls:53,vars:8,consts:[["add_pro",""],["btnSubmit",""],[1,"card_page"],["appFadeUp","",1,"project_card","fade-up"],["class","add_new_project",3,"click",4,"ngIf"],[1,"add_type","hidden"],[3,"ngSubmit","formGroup"],[1,"fa-solid","fa-circle-xmark",3,"click"],["appFadeUp","",1,"text-center","fade-up"],[1,"flid"],["for","title","appFadeUp","",1,"form-label","fade-up"],["type","text","name","title","id","title","appFadeUp","","formControlName","project_title",1,"form-control","fade-up"],[1,"validators"],["for","description","appFadeUp","",1,"form-label","fade-up"],["type","text","name","description","id","description","appFadeUp","","formControlName","project_dis",1,"form-control","fade-up"],["for","type","appFadeUp","",1,"form-label","fade-up"],["type","text","name","type","id","type","appFadeUp","","formControlName","project_type",1,"form-control","fade-up"],["for","rate","appFadeUp","",1,"form-label","fade-up"],["type","number","name","rate","id","rate","appFadeUp","","formControlName","project_rate",1,"form-control","fade-up"],["for","media",1,"form-label"],["type","text","name","media","id","media","formControlName","project_image",1,"form-control"],["for","details","appFadeUp","",1,"form-label","fade-up"],["type","text","name","details","id","details","appFadeUp","","formControlName","project_details",1,"fade-up","form-control"],["formArrayName","project_media",1,"flid"],[1,"media",3,"formGroupName"],["type","button",1,"btn","btn-primary",3,"click"],[1,"fa-solid","fa-plus"],["type","submit",1,"btn","btn-primary","w-25"],["alt","project",3,"click","src"],[1,"rate"],[1,"fa-solid","fa-star"],[1,"lr"],[1,"text"],[1,"title",3,"click"],[1,"tools"],[1,"fa-regular","fa-eye",3,"click"],["class","fa-solid fa-pen",3,"click",4,"ngIf"],["class","fa-solid fa-trash",3,"click",4,"ngIf"],[1,"fa-solid","fa-pen",3,"click"],[1,"fa-solid","fa-trash",3,"click"],[1,"add_new_project",3,"click"],[1,"fa-solid","fa-circle-plus"],["appFadeUp","",1,"my-2","fade-up","alert","alert-danger"],[1,"fa-solid","fa-circle-exclamation"],["appFadeUp","",1,"fade-up","alert","alert-danger","my-2"],[1,"form-label"],["type","text","formControlName","url","placeholder","Media URL","formControlName","url",1,"form-control","w-25","d-inline","mx-1"],["type","text","formControlName","dis","placeholder","Description","formControlName","dis",1,"form-control","w-25","d-inline","mx-1"],["name","isVideo","id","isVideo","formControlName","isVideo",1,"form-select","d-inline","w-auto","mx-2"],[3,"ngValue"]],template:function(e,n){if(e&1){let l=x();r(0,"section",2),w(1,de,16,9,"article",3,y),_(3,se,5,0,"section",4),o(),r(4,"section",5,0)(6,"form",6),h("ngSubmit",function(){return j(l),C(n.onsubmit())}),r(7,"i",7),h("click",function(){return j(l),C(n.closing_add_pro())}),o(),r(8,"h2",8),a(9," add new project"),o(),r(10,"article",9)(11,"label",10),a(12,"project title"),o(),p(13,"input",11),r(14,"div",12),_(15,ue,2,2),o()(),r(16,"article",9)(17,"label",13),a(18,"project description"),o(),p(19,"input",14),r(20,"div",12),_(21,Ce,2,2),o()(),r(22,"article",9)(23,"label",15),a(24,"project type"),o(),p(25,"input",16),r(26,"div",12),_(27,ge,1,1),o()(),r(28,"article",9)(29,"label",17),a(30,"project rate"),o(),p(31,"input",18),r(32,"div",12),_(33,be,3,3),o()(),r(34,"article",9)(35,"label",19),a(36,"project poster"),o(),p(37,"input",20),r(38,"div",12),_(39,we,1,1),o()(),r(40,"article",9)(41,"label",21),a(42,"project details"),o(),p(43,"input",22),o(),r(44,"article",23),w(45,Se,10,4,"div",24,y),r(47,"button",25),h("click",function(){return j(l),C(n.addMedia())}),p(48,"i",26),o()(),r(49,"button",27,1),_(51,Me,1,0)(52,Ee,1,0),o()()()}if(e&2){let l;c(),S(n.projcets),c(2),g("ngIf",n.adminMode),c(3),g("formGroup",n.add_project),c(9),s(n.project_title.dirty||n.project_title.touched?15:-1),c(6),s(n.project_dis.dirty||n.project_dis.touched?21:-1),c(6),s(n.project_type.dirty||n.project_type.touched?27:-1),c(6),s(n.project_rate.dirty||n.project_rate.touched?33:-1),c(6),s(n.project_image.dirty||n.project_image.touched?39:-1),c(6),S(n.mediaControls.controls),c(6),s((l=n.eidtMode)===!0?51:l===!1?52:-1)}},dependencies:[G,b,re,Y,ee,te,z,H,Z,Q,B,J,X,K,W,L],styles:[".card_page[_ngcontent-%COMP%]{width:100%;display:grid;grid-template-columns:repeat(auto-fill,minmax(270px,1fr));gap:2rem;flex-wrap:wrap}.project_card[_ngcontent-%COMP%]{width:100%;height:250px;position:relative;border-radius:.3rem;cursor:pointer;box-shadow:var(--shadow)}.project_card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;border-radius:.3rem;object-fit:cover;anchor-name:--img}.lr[_ngcontent-%COMP%]{height:50%;border-radius:.3rem;width:90%;padding:1rem;display:flex;justify-content:space-between;background-color:#fffc;position:absolute;top:100%;left:5%;opacity:0;transition:var(--transition);pointer-events:none}.lr[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{flex-grow:2}.lr[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{transition:var(--transition)}.lr[_ngcontent-%COMP%]   .tools[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem;color:var(--dark);transition:var(--transition)}.lr[_ngcontent-%COMP%]   .tools[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{transition:var(--transition)}.project_card[_ngcontent-%COMP%]:hover   .lr[_ngcontent-%COMP%]{top:45%;opacity:1;pointer-events:all}.lr[_ngcontent-%COMP%]   .tools[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]:hover, .lr[_ngcontent-%COMP%]:hover   .text[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:var(--main-color)}.project_card[_ngcontent-%COMP%]   .rate[_ngcontent-%COMP%]{display:inline;position:absolute;padding:.3rem;background-color:var(--main-color);color:var(--color-text);border-radius:20px;position-anchor:--img;bottom:calc(anchor(top) - 50px);left:calc(anchor(right) - 60px)}.add_new_project[_ngcontent-%COMP%]{height:250px;border-radius:.4rem;background-color:var(--color-text);box-shadow:var(--shadow);padding:.1rem;display:inline-grid;place-items:center;transition:var(--transition);cursor:pointer;position:relative}.add_new_project[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:100%;height:0;background-color:var(--color-muted);border-radius:0 0 .4rem .4rem;font-size:2rem;position:absolute;top:100%;left:0;text-align:center;transition:var(--transition);opacity:0}.add_new_project[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{position:absolute;left:50%;top:-1rem;transform:translate(-50%)}.add_new_project[_ngcontent-%COMP%]:hover{color:var(--main-color);transform:translateY(-15px)}.add_new_project[_ngcontent-%COMP%]:hover   span[_ngcontent-%COMP%]{height:40%;top:60%;opacity:1;color:var(--main-color)}.add_type[_ngcontent-%COMP%]{width:100%;height:100%;position:fixed;top:0;left:0;background:#000000b3;display:grid;place-items:center;transition:var(--transition)}.add_type.hidden[_ngcontent-%COMP%]{z-index:0;opacity:0;pointer-events:none}.add_type.show[_ngcontent-%COMP%]{z-index:1;opacity:1;pointer-events:auto}.add_type[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{width:90%;margin:auto;height:80vh;overflow-y:auto;padding:clamp(1.2rem,1vw + .8rem,2rem);display:flex;flex-direction:column;gap:1rem;border-radius:.5rem;background-color:var(--color-text);box-shadow:var(--shadow);position:relative}.add_type[_ngcontent-%COMP%]   .fa-circle-xmark[_ngcontent-%COMP%]{position:absolute;top:10px;right:10px;font-size:1.4rem;color:var(--red);cursor:pointer}.add_type[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:var(--main-color);text-transform:capitalize}"]})};export{oe as a};
